# Heilong

Хейлун, aka 黑龙 - черный дракон, робо-проект на китайской мобильной гусеничной платформе. Цель проекта - создание мобильного робота, способного ориентироваться в пространстве.

![banner-heilong](assets/images/assets/images/banner-heilong-360p-w.svg)

На гусеничную платформу также можно добавить 4-х или 6-и осевые манипуляторы, что сделает робота еще интереснее.

Управление роботом планируется осуществлять при помощи мини-компьютеров как на основе контроллеров (например, Arduino), так и более серьезных (например Orange Pi с NPU).

Комплектация робота на текущий момент:

* Гусеничная [платформа XiaoR Geek TH](https://www.xiaorgeek.net/products/metal-tank-chassis?variant=41437708845142) (танк) с двумя [двигателями](https://www.xiaorgeek.net/products/xr25-370-dual-output-shaft-strong-magnetic-high-torque-permanent-magnet-dc-motor-special-motor-for-smart-car-6-12v-motor).
* Ультразвуковые дальнометры [HC-SR04](https://www.xiaorgeek.net/products/xiaor-geek-protective-case-for-ultrasonic-sensor) (3 шт).
* Arduino Uno совместимая плата [Waveshare R3 Plus](https://www.waveshare.com/r3-plus.htm) ([документация](https://www.waveshare.com/wiki/R3_PLUS)).
* Плата расширения для управления моторами Seeed Studio [4A Motor Shield](https://wiki.seeedstudio.com/4A_Motor_Shield).
* Плата расширения [IArduino Battery Shield](https://iarduino.ru/shop/Expansion-payments/battery-shield.html) ([документация](https://wiki.iarduino.ru/page/Battery_Shield)).
* Дополнительный аккумулятор (аккумуляторная сборка) [Robiton LP-STB3-3300](https://www.robiton.ru/product/13351) ([документация](https://www.robiton.ru/sites/default/files/P00137385N13351.pdf)).

## Ориентация в пространстве

Для ориентации в пространстве используются ультразвуковые дальнометры для измерения расстояния до ближайших препятствий. Дальность обнаружения до 50 см (точно) и до 70-80 см (не точно), что вполне достаточно для того, чтобы остановиться.

При использовании ультразвука робот получается немного слеповат (как летучая мышь). К дальнометрам планируется добавить визуальную составляющую (видеокамеры).

> Arduino-подобный модуль не способен работать с видеопотоками, поэтому для камер потребуется что-то вроде Orange Pi.

Задачу ориентации в пространстве можно декомпозировать на две отдельные подзадачи:
1. Избегание столкновений (collision avoidance)
2. Планирование движения/маршрута (planning)

### Избегание столкновений

Задачу можно решить несколькими способами. Базовый вариант решения - **фиксированный алгоритм**, который можно реализовать даже на безе Arduino-подобного модуля:
* движение вперед;
* чтение значений с ультразвуковых дальнометров;
* остановка, если расстояние меньше (или больше, например, если датчик смотрит вниз - чтобы не упасть с возвышенности)  порогового значения;
* сравнение расстояний с дальнометров;
* разворот в сторону датчика наибольшим значением, либо в произвольную сторону, если значения примерно равны;
* движение вперед.

> Так робот будет бесцельно двигаться. Для придания смысла всякому движению нужно планирование.

Более продвинутый вариант - использование методов **обучения с подкреплением** (RL, *reinforcement learning*), для чего потребуется микрокомпьютер с NPU. Также при помощи RL методов можно частично решить задачу планирования движения, например, использовав внутреннюю мотивацию (curiosity, любопытство) - так робот будет исследовать локации, отдавая предпочтение тем, где еще не был (нужно будет зрение, либо более точное, чем просто три значения расстояния, наблюдение/состояние на входе агенту).

### Планирование движения

Более продвинутым вариантом исследования локаций можно назвать составление карты локации, что может быть реализовано при помощи SLAM (simultaneous localization and mapping). В отличие от curiosity карта составляется в явном виде (тогда как при внутренней мотивации агент будет стремиться уменьшить меру неопределенности/незнакомости обстановки в неявном виде).

В случае составления карт можно будет уже выстраивать маршруты обхода локации. Либо можно задавать заранее подгтовленные карты и решать задачу локализации.

## Манипуляция объектами

На этапе расширения комплектации робота манипуляторами можно уже ставить задачи взаимодействия с объектами с использованием методов обучения с подкреплением и компьютерного зрения.

> Манипуляция объектами при помощи RL+CV, разумеется, насколько позволят вычислительные способности микрокомпьютеров с NPU.
